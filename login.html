<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Domo-Connect — Connexion</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;300;400;500;700&display=swap" rel="stylesheet">
<style>
:root {
    --bg-start:#0c0c12;
    --bg-end:#1b1b26;
    --primary-color:#9c27b0;
    --accent-color:#dc75ef;
    --text-light:#f5f5f5;
    --text-muted:#b0b0b0;
    --glass-bg: rgba(30,30,45,0.65);
    --shadow-lg:0 10px 60px rgba(0,0,0,0.8);
    --shadow-btn:0 4px 15px rgba(0,0,0,0.2);
    --radius:14px;
    font-family:'Inter', system-ui, -apple-system, 'Segoe UI', Roboto, sans-serif;
}

*{box-sizing:border-box;margin:0;padding:0;}
html, body{height:100%;background:linear-gradient(145deg,var(--bg-start),var(--bg-end));overflow:hidden;color:var(--text-light);display:flex;align-items:center;justify-content:center;}

body::before, body::after{
    content:'';
    position:absolute;
    width:350px;height:350px;
    border-radius:50%;
    filter:blur(120px);
    opacity:0.35;
    z-index:0;
    animation: floatOrb 16s ease-in-out infinite alternate;
}
body::before{background:var(--primary-color);top:-80px;left:-100px;}
body::after{background:var(--accent-color);bottom:-100px;right:-120px;animation-delay:4s;}
@keyframes floatOrb{0%{transform:translateY(0) scale(1);}100%{transform:translateY(20px) scale(1.05);}}

.wrap{height:100%;display:flex;align-items:center;justify-content:center;padding:24px;position:relative;z-index:1;}
.card{
    position:relative; width:100%; max-width:420px; background:var(--glass-bg); padding:26px;
    border-radius:var(--radius); box-shadow:var(--shadow-lg); border:1px solid rgba(255,255,255,0.05);
    backdrop-filter:blur(10px); overflow:hidden; transition: transform 0.25s, box-shadow 0.25s;
}
.card:hover{transform:translateY(-4px); box-shadow:0 0 45px var(--primary-color);}
.card::before{
    content:''; position:absolute; top:0; left:0; width:100%; height:100%;
    background: linear-gradient(135deg, rgba(255,255,255,0.12) 0%, rgba(255,255,255,0) 60%);
    pointer-events:none; border-radius:var(--radius);
}

.brand{display:flex;gap:12px;align-items:center;margin-bottom:14px;}
.logo{width:56px;height:56px;border-radius:12px;background:linear-gradient(135deg,var(--primary-color),var(--accent-color));
display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;font-size:20px;box-shadow:0 0 10px var(--primary-color);animation:pulse 3s ease-in-out infinite;}
@keyframes pulse{0%,100%{box-shadow:0 0 10px var(--primary-color);transform:scale(1);}50%{box-shadow:0 0 25px var(--accent-color);transform:scale(1.05);}}

h1{font-size:22px;margin-bottom:6px;}
p.lead{font-size:14px;color:var(--text-muted);margin-bottom:20px;}

form .field{margin-bottom:14px;}
label{display:block;font-size:13px;color:var(--text-muted);margin-bottom:6px;}
input[type="text"], input[type="password"]{
    width:100%; padding:11px 13px; border-radius:10px; border:1px solid rgba(255,255,255,0.08);
    background: rgba(255,255,255,0.05); color: var(--text-light); font-size:15px; transition: border-color 0.2s, box-shadow 0.2s;
}
input:focus{outline:none;border-color:var(--accent-color);box-shadow:0 0 8px var(--primary-color);}

.checkbox{display:flex;align-items:center;gap:8px;color:var(--text-muted);font-size:14px;}
a.muted{color:var(--text-muted);font-size:13px;transition:0.2s;}
a.muted:hover{color:var(--accent-color);}

button.primary{
    display:inline-flex;align-items:center;justify-content:center;width:100%;padding:11px;border:none;border-radius:10px;
    background:linear-gradient(90deg,var(--primary-color),var(--accent-color));color:#fff;font-weight:600;font-size:15px;cursor:pointer;
    transition: transform 0.15s, box-shadow 0.15s;
}
button.primary:hover{transform:scale(1.03);box-shadow:0 0 20px rgba(176,133,255,0.4);}
button.primary:disabled{opacity:0.6;cursor:wait;}

.help{height:18px;margin-top:8px;color:#ff7b7b;font-size:13px;}
.spinner{width:18px;height:18px;border:3px solid rgba(255,255,255,0.3);border-top-color:#fff;border-radius:50%;animation:spin 1s linear infinite;}
@keyframes spin{to{transform:rotate(360deg);}}

.alt{display:flex;justify-content:space-between;align-items:center;margin-top:12px;}
.footer{text-align:center;font-size:12px;margin-top:16px;color:var(--text-muted);}

@media(max-width:480px){.card{padding:18px;margin:6px;}.logo{width:48px;height:48px;font-size:17px;}}
</style>
</head>
<body>
<div class="wrap">
    <div class="card">
      <div class="brand">
        <div class="logo">DC</div>
        <div>
          <h1>Domo-Connect</h1>
          <p class="lead">Connecte-toi pour piloter ta maison intelligente</p>
        </div>
      </div>

      <form id="loginForm" novalidate>
        <div class="field">
          <label for="username">Nom d'utilisateur</label>
          <input id="username" name="username" type="text" placeholder="ex. alice" required autofocus />
        </div>

        <div class="field">
          <label for="password">Mot de passe</label>
          <input id="password" name="password" type="password" placeholder="••••••••" required />
        </div>

        <div class="row" style="display:flex;justify-content:space-between;align-items:center;">
          <label class="checkbox"><input id="remember" type="checkbox"> Se souvenir de moi</label>
          <a href="#" id="forgot" class="muted">Mot de passe oublié ?</a>
        </div>

        <div style="height:10px"></div>

        <button type="submit" class="primary" id="btnLogin"><span id="btnContent">Se connecter</span></button>
        <div id="help" class="help"></div>

        <div class="alt">
          <span class="muted">Créer un compte ?</span>
          <a href="#" id="signup" class="muted">Demander un accès</a>
        </div>
      </form>

      <div class="footer">© 2025 Domo-Connect — Gestion domotique sécurisée</div>
    </div>
</div>

<script>
const form = document.getElementById('loginForm');
const btn = document.getElementById('btnLogin');
const btnContent = document.getElementById('btnContent');
const help = document.getElementById('help');

function setLoading(loading){
  if(loading){
    btn.disabled = true;
    btnContent.innerHTML = '<span class="spinner"></span>&nbsp;Connexion…';
  } else {
    btn.disabled = false;
    btnContent.textContent = 'Se connecter';
  }
}
function showError(msg){ help.textContent = msg; }
function clearError(){ help.textContent = ''; }

function simulateLogin(username,password){
  return new Promise((resolve)=>{
    setTimeout(()=>{
      if(username==='admin' && password==='admin'){
        resolve({success:true,user:{id:1,username,role:'admin'}});
      } else {
        resolve({success:false,message:'Identifiants incorrects'});
      }
    },900);
  });
}

form.addEventListener('submit', async (e) => {
  e.preventDefault();
  clearError();
  const username = form.username.value.trim();
  const password = form.password.value;
  if (!username) { showError("Entrez votre nom d’utilisateur"); return; }
  if (!password) { showError("Entrez votre mot de passe"); return; }
  setLoading(true);
  try {
    const res = await simulateLogin(username, password);
    if (res.success) {
      const remember = document.getElementById('remember').checked;
      const storage = remember ? localStorage : sessionStorage;
      storage.setItem('mc_user', JSON.stringify(res.user));
      btnContent.textContent = 'Succès ✓';
      setTimeout(()=>{ window.location.href='accueil.html'; },500);
    } else { showError(res.message); }
  } catch(err){ showError("Erreur réseau"); }
  finally{ setLoading(false); }
});

document.getElementById('forgot').addEventListener('click', (e)=>{ e.preventDefault(); alert("Procédure mot de passe oublié à implémenter côté backend."); });
document.getElementById('signup').addEventListener('click', (e)=>{ e.preventDefault(); alert("Contactez l’administrateur pour créer un compte."); });

(function prefillUser(){
  try {
    const u = JSON.parse(localStorage.getItem('mc_user')||sessionStorage.getItem('mc_user')||'null');
    if(u && u.username){ form.username.value = u.username; document.getElementById('remember').checked=!!localStorage.getItem('mc_user'); }
  } catch(e){ console.error(e); }
})();
</script>
</body>
</html>